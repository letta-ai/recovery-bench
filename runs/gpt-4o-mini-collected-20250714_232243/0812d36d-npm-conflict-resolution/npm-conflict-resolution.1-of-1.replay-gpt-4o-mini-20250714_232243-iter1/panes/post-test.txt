root@52f2c0a1b28b:/app# bash /tests/run-tests.sh; tmux wait -S done
Hit:1 http://archive.ubuntu.com/ubuntu noble InRelease
Get:2 http://archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
Hit:3 https://deb.nodesource.com/node_20.x nodistro InRelease
Get:4 http://security.ubuntu.com/ubuntu noble-security InRelease [126 kB]
Get:5 http://archive.ubuntu.com/ubuntu noble-backports InRelease [126 kB]
Fetched 378 kB in 1s (547 kB/s)
Reading package lists... Done
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
0 upgraded, 0 newly installed, 0 to remove and 24 not upgraded.
downloading uv 0.7.13 x86_64-unknown-linux-gnu
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
Initialized project `app`
Using CPython 3.12.3 interpreter at: /usr/bin/python3.12
Creating virtual environment at: .venv
Resolved 7 packages in 127ms
Prepared 5 packages in 143ms
Installed 5 packages in 26ms
 + iniconfig==2.1.0
 + packaging==25.0
 + pluggy==1.6.0
 + pygments==2.19.2
 + pytest==8.4.1
===================================================================== test session starts ======================================================================
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
collected 5 items

../tests/test_outputs.py ..F..                                                                                                                           [100%]

=========================================================================== FAILURES ===========================================================================
__________________________________________________________ test_installed_packages_match_dependencies __________________________________________________________

    def test_installed_packages_match_dependencies():
        """
            Test that all packages listed in package.json are actually installed.
            This test is to ensure that npm install was successful.
        """

        # Get expected dependencies from package.json
        exp_deps = get_package_json_dependencies()
        all_expected = {**exp_deps['dependencies'], **exp_deps['devDependencies']}

        # Get actually installed packages
        installed = get_installed_packages('npm')

        # Check that all expected packages are installed
        missing_packages = []
        for package_name in all_expected.keys():
            if package_name not in installed:
                missing_packages.append(package_name)

>       assert not missing_packages, f"Missing packages with npm: {missing_packages}"
E       AssertionError: Missing packages with npm: ['@aws-amplify/core', '@aws-amplify/ui-react', '@babel/plugin-proposal-decorators', '@flyskywhy/react-native-
gcanvas', '@nozbe/watermelondb', '@react-native-async-storage/async-storage', '@react-native-community/checkbox', '@react-native-community/datetimepicker', '@re
act-native-community/masked-view', '@react-native-community/netinfo', '@react-navigation/bottom-tabs', '@react-navigation/native', '@react-navigation/stack', '@
testing-library/react-hooks', 'amazon-cognito-identity-js', 'aws-amplify', 'aws-amplify-react-native', 'babel-preset-react-native', 'crypto', 'eslint-plugin-rea
ct', 'eslint-plugin-react-native', 'formik', 'generate-username-from-email', 'graphql', 'lodash', 'moment', 'prop-types', 'react', 'react-dom', 'react-native',
'react-native-bootsplash', 'react-native-canvas', 'react-native-chart-kit', 'react-native-confirmation-code-input', 'react-native-device-info', 'react-native-do
tenv', 'react-native-elements', 'react-native-gesture-handler', 'react-native-i18n', 'react-native-idle-timer', 'react-native-keychain', 'react-native-reanimate
d', 'react-native-safe-area-context', 'react-native-screens', 'react-native-svg', 'react-native-toast-notifications', 'react-native-vector-icons', 'react-native
-video', 'react-native-video-controls', 'react-native-vimeo-iframe', 'react-native-webview', 'react-navigation', 'unique-username-generator', 'yup', '@babel/cor
e', '@babel/runtime', '@react-native-community/eslint-config', '@testing-library/react-native', '@types/react-native-vector-icons', 'babel-jest', 'eslint', 'esl
int-config-prettier', 'eslint-config-standard', 'eslint-plugin-import', 'eslint-plugin-n', 'eslint-plugin-prettier', 'eslint-plugin-promise', 'husky', 'jest', '
jetifier', 'metro-react-native-babel-preset', 'prettier', 'react-test-renderer']
E       assert not ['@aws-amplify/core', '@aws-amplify/ui-react', '@babel/plugin-proposal-decorators', '@flyskywhy/react-native-gcanvas', '@nozbe/watermelondb',
 '@react-native-async-storage/async-storage', ...]

/tests/test_outputs.py:237: AssertionError
--------------------------------------------------------------------- Captured stdout call ---------------------------------------------------------------------
Error running npm list: npm error code ELSPROBLEMS
npm error missing: @aws-amplify/core@^4.3.12, required by npm-conflict-resolution@1.0.0
npm error missing: @aws-amplify/ui-react@^1.2.26, required by npm-conflict-resolution@1.0.0
npm error missing: @babel/core@^7.16.7, required by npm-conflict-resolution@1.0.0
npm error missing: @babel/plugin-proposal-decorators@^7.16.7, required by npm-conflict-resolution@1.0.0
npm error missing: @babel/runtime@^7.16.7, required by npm-conflict-resolution@1.0.0
npm error missing: @flyskywhy/react-native-gcanvas@^2.3.22, required by npm-conflict-resolution@1.0.0
npm error missing: @nozbe/watermelondb@^0.24.0, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-async-storage/async-storage@^1.17.6, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-community/checkbox@^0.5.9, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-community/datetimepicker@^4.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-community/eslint-config@^2.0.0, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-community/masked-view@^0.1.11, required by npm-conflict-resolution@1.0.0
npm error missing: @react-native-community/netinfo@^6.2.1, required by npm-conflict-resolution@1.0.0
npm error missing: @react-navigation/bottom-tabs@^5.11.15, required by npm-conflict-resolution@1.0.0
npm error missing: @react-navigation/native@^5.9.8, required by npm-conflict-resolution@1.0.0
npm error missing: @react-navigation/stack@^5.14.9, required by npm-conflict-resolution@1.0.0
npm error missing: @testing-library/react-hooks@^5.1.3, required by npm-conflict-resolution@1.0.0
npm error missing: @testing-library/react-native@^7.2.0, required by npm-conflict-resolution@1.0.0
npm error missing: @types/react-native-vector-icons@^6.4.10, required by npm-conflict-resolution@1.0.0
npm error missing: amazon-cognito-identity-js@^5.2.4, required by npm-conflict-resolution@1.0.0
npm error missing: aws-amplify-react-native@^5.0.5, required by npm-conflict-resolution@1.0.0
npm error missing: aws-amplify@^4.3.12, required by npm-conflict-resolution@1.0.0
npm error missing: babel-jest@^26.6.3, required by npm-conflict-resolution@1.0.0
npm error missing: babel-preset-react-native@^4.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: crypto@^1.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-config-prettier@^8.5.0, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-config-standard@^17.0.0, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-import@^2.26.0, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-n@^15.2.5, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-prettier@^4.2.1, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-promise@^6.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-react-native@^4.0.0, required by npm-conflict-resolution@1.0.0
npm error missing: eslint-plugin-react@^7.31.0, required by npm-conflict-resolution@1.0.0
npm error missing: eslint@^8.22.0, required by npm-conflict-resolution@1.0.0
npm error missing: formik@^2.2.9, required by npm-conflict-resolution@1.0.0
npm error missing: generate-username-from-email@^1.0.2, required by npm-conflict-resolution@1.0.0
npm error missing: graphql@^16.2.0, required by npm-conflict-resolution@1.0.0
npm error missing: husky@^6.0.0, required by npm-conflict-resolution@1.0.0
npm error missing: jest@^26.6.3, required by npm-conflict-resolution@1.0.0
npm error missing: jetifier@^1.6.8, required by npm-conflict-resolution@1.0.0
npm error missing: lodash@^4.17.21, required by npm-conflict-resolution@1.0.0
npm error missing: metro-react-native-babel-preset@^0.64.0, required by npm-conflict-resolution@1.0.0
npm error missing: moment@^2.29.1, required by npm-conflict-resolution@1.0.0
npm error missing: prettier@^2.7.1, required by npm-conflict-resolution@1.0.0
npm error missing: prop-types@^15.8.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-dom@16.13.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-bootsplash@^3.2.7, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-canvas@^0.1.38, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-chart-kit@^6.11.0, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-confirmation-code-input@^1.0.4, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-device-info@^10.5.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-dotenv@^3.3.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-elements@^3.4.2, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-gesture-handler@^1.10.3, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-i18n@^2.0.15, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-idle-timer@^2.1.7, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-keychain@^7.0.0, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-reanimated@2.2.4, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-safe-area-context@^3.3.2, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-screens@^3.4.0, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-svg@^12.1.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-toast-notifications@^3.2.3, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-vector-icons@^8.1.0, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-video-controls@^2.8.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-video@^5.2.0, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-vimeo-iframe@^1.0.4, required by npm-conflict-resolution@1.0.0
npm error missing: react-native-webview@^11.21.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-native@0.64.1, required by npm-conflict-resolution@1.0.0
npm error missing: react-navigation@^4.4.4, required by npm-conflict-resolution@1.0.0
npm error missing: react-test-renderer@17.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: react@17.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: unique-username-generator@^1.0.1, required by npm-conflict-resolution@1.0.0
npm error missing: yup@^0.32.11, required by npm-conflict-resolution@1.0.0
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-07-15T02_01_25_688Z-debug-0.log

============================================================================ PASSES ============================================================================
=================================================================== short test summary info ====================================================================
PASSED ../tests/test_outputs.py::test_node_version_is_correct
PASSED ../tests/test_outputs.py::test_conflict_resolution_versions_are_correct
PASSED ../tests/test_outputs.py::test_aws_packages_have_same_version
PASSED ../tests/test_outputs.py::test_all_original_packages_present
FAILED ../tests/test_outputs.py::test_installed_packages_match_dependencies - AssertionError: Missing packages with npm: ['@aws-amplify/core', '@aws-amplify/ui-
react', '@babel/plugin-proposal-decorators', '@flyskywhy/react-native-gca...
================================================================= 1 failed, 4 passed in 0.41s ==================================================================
root@52f2c0a1b28b:/app#
