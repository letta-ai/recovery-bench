root@457f1ab9a4c6:/app# apt update && apt install -y nginx; tmux wait -S done
Hit:1 http://deb.debian.org/debian bookworm InRelease
Hit:2 http://deb.debian.org/debian bookworm-updates InRelease
Hit:3 http://deb.debian.org/debian-security bookworm-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
30 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  iproute2 libatm1 libbpf1 libbsd0 libcap2 libcap2-bin libelf1 libmnl0 libpam-cap libxtables12 nginx-common
Suggested packages:
  iproute2-doc fcgiwrap nginx-doc ssl-cert
The following NEW packages will be installed:
  iproute2 libatm1 libbpf1 libbsd0 libcap2-bin libelf1 libmnl0 libpam-cap libxtables12 nginx nginx-common
The following packages will be upgraded:
  libcap2
1 upgraded, 11 newly installed, 0 to remove and 29 not upgraded.
Need to get 2311 kB of archives.
After this operation, 7406 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main amd64 libcap2 amd64 1:2.66-4+deb12u1 [27.2 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libelf1 amd64 0.188-2.1 [174 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libbpf1 amd64 1:1.1.0-1 [145 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 libbsd0 amd64 0.11.7-2 [117 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 libmnl0 amd64 1.0.4-3 [12.5 kB]
Get:6 http://deb.debian.org/debian bookworm/main amd64 libxtables12 amd64 1.8.9-2 [30.8 kB]
Get:7 http://deb.debian.org/debian bookworm/main amd64 libcap2-bin amd64 1:2.66-4+deb12u1 [34.8 kB]
Get:8 http://deb.debian.org/debian bookworm/main amd64 iproute2 amd64 6.1.0-3 [1046 kB]
Get:9 http://deb.debian.org/debian bookworm/main amd64 libatm1 amd64 1:2.5.1-4+b2 [68.3 kB]
Get:10 http://deb.debian.org/debian bookworm/main amd64 libpam-cap amd64 1:2.66-4+deb12u1 [14.7 kB]
Get:11 http://deb.debian.org/debian bookworm/main amd64 nginx-common all 1.22.1-9+deb12u2 [112 kB]
Get:12 http://deb.debian.org/debian bookworm/main amd64 nginx amd64 1.22.1-9+deb12u2 [528 kB]
Fetched 2311 kB in 0s (20.8 MB/s)
debconf: delaying package configuration, since apt-utils is not installed
(Reading database ... 7714 files and directories currently installed.)
Preparing to unpack .../libcap2_1%3a2.66-4+deb12u1_amd64.deb ...
Unpacking libcap2:amd64 (1:2.66-4+deb12u1) over (1:2.66-4) ...
Setting up libcap2:amd64 (1:2.66-4+deb12u1) ...
Selecting previously unselected package libelf1:amd64.
(Reading database ... 7714 files and directories currently installed.)
Preparing to unpack .../00-libelf1_0.188-2.1_amd64.deb ...
Unpacking libelf1:amd64 (0.188-2.1) ...
Selecting previously unselected package libbpf1:amd64.
Preparing to unpack .../01-libbpf1_1%3a1.1.0-1_amd64.deb ...
Unpacking libbpf1:amd64 (1:1.1.0-1) ...
Selecting previously unselected package libbsd0:amd64.
Preparing to unpack .../02-libbsd0_0.11.7-2_amd64.deb ...
Unpacking libbsd0:amd64 (0.11.7-2) ...
Selecting previously unselected package libmnl0:amd64.
Preparing to unpack .../03-libmnl0_1.0.4-3_amd64.deb ...
Unpacking libmnl0:amd64 (1.0.4-3) ...
Selecting previously unselected package libxtables12:amd64.
Preparing to unpack .../04-libxtables12_1.8.9-2_amd64.deb ...
Unpacking libxtables12:amd64 (1.8.9-2) ...
Selecting previously unselected package libcap2-bin.
Preparing to unpack .../05-libcap2-bin_1%3a2.66-4+deb12u1_amd64.deb ...
Unpacking libcap2-bin (1:2.66-4+deb12u1) ...
Selecting previously unselected package iproute2.
Preparing to unpack .../06-iproute2_6.1.0-3_amd64.deb ...
Unpacking iproute2 (6.1.0-3) ...
Selecting previously unselected package libatm1:amd64.
Preparing to unpack .../07-libatm1_1%3a2.5.1-4+b2_amd64.deb ...
Unpacking libatm1:amd64 (1:2.5.1-4+b2) ...
Selecting previously unselected package libpam-cap:amd64.
Preparing to unpack .../08-libpam-cap_1%3a2.66-4+deb12u1_amd64.deb ...
Unpacking libpam-cap:amd64 (1:2.66-4+deb12u1) ...
Selecting previously unselected package nginx-common.
Preparing to unpack .../09-nginx-common_1.22.1-9+deb12u2_all.deb ...
Unpacking nginx-common (1.22.1-9+deb12u2) ...
Selecting previously unselected package nginx.
Preparing to unpack .../10-nginx_1.22.1-9+deb12u2_amd64.deb ...
Unpacking nginx (1.22.1-9+deb12u2) ...
Setting up nginx-common (1.22.1-9+deb12u2) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/pe
rl/5.36.0 /usr/local/share/perl/5.36.0 /usr/lib/x86_64-linux-gnu/perl5/5.36 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/
5.36 /usr/share/perl/5.36 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
debconf: falling back to frontend: Teletype
Setting up libatm1:amd64 (1:2.5.1-4+b2) ...
Setting up libcap2-bin (1:2.66-4+deb12u1) ...
Setting up libmnl0:amd64 (1.0.4-3) ...
Setting up libxtables12:amd64 (1.8.9-2) ...
Setting up libbsd0:amd64 (0.11.7-2) ...
Setting up libelf1:amd64 (0.188-2.1) ...
Setting up libpam-cap:amd64 (1:2.66-4+deb12u1) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/pe
rl/5.36.0 /usr/local/share/perl/5.36.0 /usr/lib/x86_64-linux-gnu/perl5/5.36 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/
5.36 /usr/share/perl/5.36 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
debconf: falling back to frontend: Teletype
Setting up libbpf1:amd64 (1:1.1.0-1) ...
Setting up iproute2 (6.1.0-3) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/pe
rl/5.36.0 /usr/local/share/perl/5.36.0 /usr/lib/x86_64-linux-gnu/perl5/5.36 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/
5.36 /usr/share/perl/5.36 /usr/local/lib/site_perl) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)
debconf: falling back to frontend: Teletype
Setting up nginx (1.22.1-9+deb12u2) ...
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
Processing triggers for libc-bin (2.36-9+deb12u9) ...
root@457f1ab9a4c6:/app# echo 'server {\n  listen 8080;\n  root /var/www/html;\n  index index.html;\n  access_log /var/log/nginx/benchmark-access.log '$time_loca
l' '$request_method' '$status' '"$http_user_agent";\n  limit_req_zone $binary_remote_addr zone=one:10m rate=10s;\n  location / {\n    limit_req zone=one;\n  }\n
  error_page 404 /404.html;\n  location = /404.html {\n    internal;\n  }\n}\n' > /etc/nginx/conf.d/benchmark-site.conf
> mkdir -p /var/www/html && echo 'Welcome to the benchmark webserver' > /var/www/html/index.html
> echo 'Page not found - Please check your URL' > /var/www/html/404.html
> systemctl start nginx; tmux wait -S done
> nginx -g 'daemon off;'; tmux wait -S done
> pkill nginx
> nginx -g 'daemon off;'; tmux wait -S done
> pkill -f nginx
> nginx -g 'daemon off;'; tmux wait -S done
> /usr/sbin/nginx -c /etc/nginx/conf.d/benchmark-site.conf; tmux wait -S done
> pkill -f nginx
> nginx -g 'daemon off;'; tmux wait -S done
> ps aux | grep nginx; tmux wait -S done
> killall apt-get
> killall dpkg
> nginx -g 'daemon off;'; tmux wait -S done
> top -b -n 1; tmux wait -S done
> exit
> tmux new-session; tmux wait -S done
> exit
> docker restart <container_id>; tmux wait -S done
> docker stop <container_id>; tmux wait -S done
> service docker stop; tmux wait -S done
>
