>
> # Generate data
> data, _ = make_blobs(n_samples=500, centers=4, random_state=42)
>
> # Initialize
> sk = StableKMeans(data, k_max=8, number_of_subsamples=15)
>
> # Run serial
> start_time = time.time()
> sk.fit_serial(verbose=True)
> serial_time = time.time() - start_time
> optimal_k = sk.get_optimal_k()
>
> # Run parallel
> start_time = time.time()
> sk.fit_parallel(n_jobs=2, verbose=True)
> parallel_time = time.time() - start_time
> speedup = serial_time / parallel_time
>
> # Compare performance
> print(f'Serial time: {serial_time:.4f} seconds')
> print(f'Parallel time: {parallel_time:.4f} seconds')
> print(f'Speedup: {speedup:.2f}x')
> print(f'Optimal k: {optimal_k}')
> EOF
root@7d3133820f67:/app# python3 test_implementation.py; tmux wait -S done
Traceback (most recent call last):
  File "/app/test_implementation.py", line 2, in <module>
    from stable_kmeans import StableKMeans
  File "/app/stable_kmeans.py", line 1
    import numpy as np\nfrom sklearn.cluster import KMeans\nimport multiprocessing\n\nclass StableKMeans:\n    def __init__(self, data, k_max, percent_subsampli
ng=0.7, number_of_subsamples=20):\n        self.data = data\n        self.k_max = k_max\n        self.percent_subsampling = percent_subsampling\n        self.nu
mber_of_subsamples = number_of_subsamples\n        self.stability_scores = []\n        self.optimal_k = None\n\n    def fit_serial(self, verbose=True):\n
 for k in range(1, self.k_max + 1):\n            scores = []\n            for _ in range(self.number_of_subsamples):\n                subsample = self.data[np.r
andom.choice(self.data.shape[0], int(self.percent_subsampling * self.data.shape[0]), replace=False)]\n                kmeans = KMeans(n_clusters=k).fit(subsampl
e)\n                scores.append(kmeans.inertia_)\n            stability = np.std(scores)\n            self.stability_scores.append(stability)\n            if
verbose:\n                print(f'K: {k}, S
                       ^
SyntaxError: unexpected character after line continuation character
root@7d3133820f67:/app#
